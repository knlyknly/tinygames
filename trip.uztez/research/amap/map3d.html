<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D地形图</title>
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      font: 12px/16px Verdana, Helvetica, Arial, sans-serif;
      width: 100%;
      height: 100%
    }

    #container {
      height: 100%
    }
  </style>
</head>

<body>
  <div id="container"></div>

  <script type="text/javascript">
    const initMap = () => {
      var map = new AMap.Map('container', {
        rotateEnable: false,//是否开启地图旋转交互 鼠标右键 + 鼠标画圈移动 或 键盘Ctrl + 鼠标画圈移动
        pitchEnable: true, // 是否开启地图倾斜交互 鼠标右键 + 鼠标上下移动或键盘Ctrl + 鼠标上下移动
        zoom: 13.8, //初始化地图层级
        pitch: 80, // 地图俯仰角度，有效范围 0 度- 83 度
        rotation: 80,//初始地图顺时针旋转的角度
        viewMode: '3D', //开启3D视图,默认为关闭
        zooms: [2, 20],//地图显示的缩放级别范围
        center: [120.121282, 30.222719],//初始地图中心经纬度
        terrain: true // 开启地形图
      });
      AMap.plugin(['AMap.ControlBar', 'AMap.ToolBar'], function () {//异步加载插件
        var controlBar = new AMap.ControlBar({//控制地图旋转插件
          position: {
            right: '10px',
            top: '10px'
          }
        });
        map.addControl(controlBar);
        var toolBar = new AMap.ToolBar({//地图缩放插件
          position: {
            right: '40px',
            top: '110px'
          }

        });
        map.addControl(toolBar)
      });
    }
  </script>

  <script type="text/javascript">
    const getLocationSearchMap = () => JSON.parse("{\"" + (location.search.substr(1).replace(/(\=)|(\&)|(\/\?)/g, function (k) {
      var rtn = k;
      if (k == "\=") rtn = "\"\:\"";
      else if ((k == "\&") /*|| (k == "\/\?")*/) rtn = "\",\"";
      return rtn;
    }) + "\"}"));
    const locationSearchMap = getLocationSearchMap();
    window._AMapSecurityConfig = {
      securityJsCode: locationSearchMap.amapsec,
    };
  </script>
  <script src="https://webapi.amap.com/loader.js"></script>
  <script type="text/javascript">
    AMapLoader.load({
      key: "5e498fe9bb1890f055616e909236564f", //申请好的Web端开发者key，调用 load 时必填
      version: "2.1Beta", //指定要加载的 JS API 的版本，缺省时默认为 1.4.15
    })
      .then((AMap) => {
        window.AMap = AMap;
        initMap(AMap);
      })
      .catch((e) => {
        console.error(e); //加载错误提示
      });
  </script>
</body>

</html>